<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Calling_Increment_Receip_tNumber</name>
        <label>Calling Increment Receip tNumber</label>
        <locationX>798</locationX>
        <locationY>998</locationY>
        <actionName>PaymentReceiptNumber</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Loop_Assignment_for_Payment</targetReference>
        </connector>
        <flowTransactionModel>NewTransaction</flowTransactionModel>
        <nameSegment>PaymentReceiptNumber</nameSegment>
        <outputParameters>
            <assignToReference>ReceiptNumber</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>check_Record_Is_In_Approval_one</name>
        <label>check Record Is In Approval one</label>
        <locationX>281</locationX>
        <locationY>350</locationY>
        <actionName>checkRecordIsInApproval</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>check_Record_Is_In_Approval_two</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>bookingId</name>
            <value>
                <elementReference>OldBookingChoiceSet</elementReference>
            </value>
        </inputParameters>
        <nameSegment>checkRecordIsInApproval</nameSegment>
        <outputParameters>
            <assignToReference>ApprovalCheckone</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>check_Record_Is_In_Approval_two</name>
        <label>check_Record_Is_In_Approval_two</label>
        <locationX>281</locationX>
        <locationY>458</locationY>
        <actionName>checkRecordIsInApproval</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>approval_check</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>bookingId</name>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </inputParameters>
        <nameSegment>checkRecordIsInApproval</nameSegment>
        <outputParameters>
            <assignToReference>ApprovalChecktwo</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Create_Payment_Line_Items_For_Transfer_Booking</name>
        <label>Create Payment Line Items For Transfer Booking</label>
        <locationX>710</locationX>
        <locationY>1514</locationY>
        <actionName>CreatePaymentLineMilestoneTransfer</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>ByPass_these_classes</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>bookingId</name>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CreatePaymentLineMilestoneTransfer</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Create_Payment_Milestone_For_Transfer_Chrages</name>
        <label>Create Payment Milestone For Transfer Chrages</label>
        <locationX>578</locationX>
        <locationY>3602</locationY>
        <actionName>CreatePaymentMileStoneForTransfer</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Update_New_Booking</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>bookingId</name>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CreatePaymentMileStoneForTransfer</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Update_Payment_with_Approved_Status</name>
        <label>Update Payment with Approved Status</label>
        <locationX>578</locationX>
        <locationY>1730</locationY>
        <actionName>UpdateTranferPaymentStatusNew</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Update_Old_Booking_Record</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>bookingId</name>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </inputParameters>
        <nameSegment>UpdateTranferPaymentStatusNew</nameSegment>
    </actionCalls>
    <apiVersion>50.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Each_Bank_Loan_Detail_to_Collection</name>
        <label>Assign Each Bank Loan Detail to Collection</label>
        <locationX>798</locationX>
        <locationY>3194</locationY>
        <assignmentItems>
            <assignToReference>CollectionOfBankLoanDetails</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>EachBankLoanDetailsRecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Bank_loan_Details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Each_Bank_Loan_Details</name>
        <label>Assign Each Bank Loan Details</label>
        <locationX>798</locationX>
        <locationY>3086</locationY>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Home_Loan_Representative__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_on_Bank_loan_Details.Home_Loan_Representative__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Home_Loan_Institution__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_on_Bank_loan_Details.Home_Loan_Institution__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Sanction_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_on_Bank_loan_Details.Sanction_Status__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Booking__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Loan_Through__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_on_Bank_loan_Details.Loan_Through__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachBankLoanDetailsRecord.Loan_Remarks__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_on_Bank_loan_Details.Loan_Remarks__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Each_Bank_Loan_Detail_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Each_Coapplicant</name>
        <label>Assign Each Coapplicant</label>
        <locationX>798</locationX>
        <locationY>2462</locationY>
        <assignmentItems>
            <assignToReference>EachCoApplicantRecord.Account_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_On_CoApplicants_Record.Account_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachCoApplicantRecord.Role__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_On_CoApplicants_Record.Role__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachCoApplicantRecord.Booking__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EachCoApplicantRecord.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_On_CoApplicants_Record.Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Each_Coapplicant_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Each_Coapplicant_to_Collection</name>
        <label>Assign Each Coapplicant to Collection</label>
        <locationX>798</locationX>
        <locationY>2570</locationY>
        <assignmentItems>
            <assignToReference>CoApplicantsCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>EachCoApplicantRecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_On_CoApplicants_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Individual_Payment_to_Collection_Payment</name>
        <label>Assign Individual Payment to Collection Payment</label>
        <locationX>798</locationX>
        <locationY>1214</locationY>
        <assignmentItems>
            <assignToReference>CreateNewPaymentCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>PaymentIndividualRecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_for_Payment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Loop_Assignment_for_Payment</name>
        <label>Loop Assignment for Payment</label>
        <locationX>798</locationX>
        <locationY>1106</locationY>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Payment_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Payment_Category__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Booking__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Payment_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Payment_Status__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Cheque_Transaction_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Cheque_Transaction_Number__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.BankName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.BankName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Branch_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Branch_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Payment_Description__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Credit_Note_Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Booking Transfer</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Paid_By__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Paid_By__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Payment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Payment.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PaymentIndividualRecord.Receipt_No__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ReceiptNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Individual_Payment_to_Collection_Payment</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>approval_check</name>
        <label>approval check</label>
        <locationX>281</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Validate_Old_And_New_Booking_Same</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>approval_check_for_both</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>ApprovalCheckone</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ApprovalChecktwo</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>msg</targetReference>
            </connector>
            <label>approval_check for both</label>
        </rules>
    </decisions>
    <decisions>
        <name>ByPass_these_classes</name>
        <label>ByPass these classes</label>
        <locationX>710</locationX>
        <locationY>1622</locationY>
        <defaultConnector>
            <targetReference>Update_Old_Booking_Record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_New_Booking</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Payment_with_Approved_Status</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Unit_To_Unit_Transfer</name>
        <label>If Unit To Unit Transfer</label>
        <locationX>710</locationX>
        <locationY>3494</locationY>
        <defaultConnector>
            <targetReference>Update_New_Booking</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_New_Booking</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Payment_Milestone_For_Transfer_Chrages</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Validate_Old_And_New_Booking_Same</name>
        <label>Validate Old And New Booking Same</label>
        <locationX>512</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>Get_Payment_Record_From_Old_Booking</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Old_And_New_Booking_Should_Not_be_Same</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>OldBookingChoiceSet</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>NewBookingChoiceSet</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Transfer_Booking_ErrorScreen</targetReference>
            </connector>
            <label>Old And New Booking Should Not be Same</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>NewBookingChoiceSet</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Primary_Applicant__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Old_Booking_Records.Primary_Applicant__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <object>Booking__c</object>
        <outputAssignments>
            <assignToReference>NewBookingName</assignToReference>
            <field>Name</field>
        </outputAssignments>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>OldBookingChoiceSet</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>1 AND (2 OR 3 OR (4 AND 5))</filterLogic>
        <filters>
            <field>Primary_Applicant__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Old_Booking_Records.Primary_Applicant__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Booked</stringValue>
            </value>
        </filters>
        <filters>
            <field>Cancellation_Reasons__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Unit Transfer</stringValue>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Terminated</stringValue>
            </value>
        </filters>
        <object>Booking__c</object>
        <outputAssignments>
            <assignToReference>OldBookName</assignToReference>
            <field>Name</field>
        </outputAssignments>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <interviewLabel>Transfer Booking {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Transfer Booking</label>
    <loops>
        <name>Loop_for_Payment</name>
        <label>Loop for Payment</label>
        <locationX>710</locationX>
        <locationY>890</locationY>
        <collectionReference>Get_Payment_Record_From_Old_Booking</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Calling_Increment_Receip_tNumber</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Payment_on_New_Booking</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_on_Bank_loan_Details</name>
        <label>Loop on Bank loan Details</label>
        <locationX>710</locationX>
        <locationY>2978</locationY>
        <collectionReference>Get_Bank_Loan_Details_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Each_Bank_Loan_Details</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Bank_Loan_Details_Records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_On_CoApplicants_Record</name>
        <label>Loop On CoApplicants Record</label>
        <locationX>710</locationX>
        <locationY>2354</locationY>
        <collectionReference>Get_CoApplicants_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Each_Coapplicant</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_CoApplicants_Records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Bank_Loan_Details_Records</name>
        <label>Create Bank Loan Details Records</label>
        <locationX>710</locationX>
        <locationY>3386</locationY>
        <connector>
            <targetReference>If_Unit_To_Unit_Transfer</targetReference>
        </connector>
        <inputReference>CollectionOfBankLoanDetails</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_CoApplicants_Records</name>
        <label>Create CoApplicants Records</label>
        <locationX>710</locationX>
        <locationY>2762</locationY>
        <connector>
            <targetReference>Get_Bank_Loan_Details_Records</targetReference>
        </connector>
        <inputReference>CoApplicantsCollection</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Payment_on_New_Booking</name>
        <label>Create Payment on New Booking</label>
        <locationX>710</locationX>
        <locationY>1406</locationY>
        <connector>
            <targetReference>Create_Payment_Line_Items_For_Transfer_Booking</targetReference>
        </connector>
        <inputReference>CreateNewPaymentCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Bank_Loan_Details_Records</name>
        <label>Get Bank Loan Details Records</label>
        <locationX>710</locationX>
        <locationY>2870</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_on_Bank_loan_Details</targetReference>
        </connector>
        <filterLogic>1 And (2 OR 3)</filterLogic>
        <filters>
            <field>Booking__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Old_Booking_Records.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Sanction_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </filters>
        <filters>
            <field>Sanction_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>In Process</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Bank_Loan_Details__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CoApplicants_Records</name>
        <label>Get CoApplicants Records</label>
        <locationX>710</locationX>
        <locationY>2246</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_On_CoApplicants_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Booking__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Old_Booking_Records.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Co-Applicant</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Co_Applicant__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Old_Booking_Records</name>
        <label>Get Old Booking Records</label>
        <locationX>281</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Transfer_Booking</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR (4 AND 5))</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Booked</stringValue>
            </value>
        </filters>
        <filters>
            <field>Cancellation_Requested_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Unit Transfer</stringValue>
            </value>
        </filters>
        <filters>
            <field>Stage__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Terminated</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Booking__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Payment_Record_From_Old_Booking</name>
        <label>Get Payment Record From Old Booking</label>
        <locationX>710</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_for_Payment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Booking__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OldBookingChoiceSet</elementReference>
            </value>
        </filters>
        <filters>
            <field>EOI_CA_Payment__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>EOI</stringValue>
            </value>
        </filters>
        <filters>
            <field>EOI_CA_Payment__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>CA</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Payment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_New_Booking</name>
        <label>Update New Booking</label>
        <locationX>710</locationX>
        <locationY>3794</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Transferred_From_Booking__c</field>
            <value>
                <elementReference>OldBookingChoiceSet</elementReference>
            </value>
        </inputAssignments>
        <object>Booking__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Old_Booking_Record</name>
        <label>Update Old Booking Record</label>
        <locationX>710</locationX>
        <locationY>1922</locationY>
        <connector>
            <targetReference>Update_Property_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OldBookingChoiceSet</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Closed_Reason__c</field>
            <value>
                <stringValue>Transferred</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Stage__c</field>
            <value>
                <stringValue>Terminated</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Transferred_To_Booking__c</field>
            <value>
                <elementReference>NewBookingChoiceSet</elementReference>
            </value>
        </inputAssignments>
        <object>Booking__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Record</name>
        <label>Update Opportunity Record</label>
        <locationX>710</locationX>
        <locationY>2138</locationY>
        <connector>
            <targetReference>Get_CoApplicants_Records</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OldBookingChoiceSet</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Reason_for_lost__c</field>
            <value>
                <stringValue>Transfer</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StageName</field>
            <value>
                <stringValue>Closed Lost</stringValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Property_Record</name>
        <label>Update Property Record</label>
        <locationX>710</locationX>
        <locationY>2030</locationY>
        <connector>
            <targetReference>Update_Opportunity_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Old_Booking_Records.Related_Property__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Property_Status__c</field>
            <value>
                <stringValue>Available</stringValue>
            </value>
        </inputAssignments>
        <object>Property__c</object>
    </recordUpdates>
    <screens>
        <name>msg</name>
        <label>msg</label>
        <locationX>50</locationX>
        <locationY>674</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>msg_approval</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;Please check that your selected bookings are in approval process, If yes then complete them first for transfer the booking.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Transfer_Booking</name>
        <label>Transfer Booking</label>
        <locationX>281</locationX>
        <locationY>242</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>check_Record_Is_In_Approval_one</targetReference>
        </connector>
        <fields>
            <name>Select_Old_Booking</name>
            <choiceReferences>OldBookingChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select Old Booking</fieldText>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <fields>
            <name>Select_New_Booking</name>
            <choiceReferences>NewBookingChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Select New Booking</fieldText>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Transfer_Booking_ErrorScreen</name>
        <label>Transfer Booking</label>
        <locationX>314</locationX>
        <locationY>782</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ErrorScreen</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(62, 62, 60);&quot;&gt;Old And New Booking Should Not be Same.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>155</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Old_Booking_Records</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>ApprovalCheckone</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ApprovalChecktwo</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CoApplicantsCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Co_Applicant__c</objectType>
    </variables>
    <variables>
        <name>CollectionOfBankLoanDetails</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Bank_Loan_Details__c</objectType>
    </variables>
    <variables>
        <name>CreateNewPaymentCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Payment__c</objectType>
    </variables>
    <variables>
        <name>EachBankLoanDetailsRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Bank_Loan_Details__c</objectType>
    </variables>
    <variables>
        <name>EachCoApplicantRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Co_Applicant__c</objectType>
    </variables>
    <variables>
        <name>NewBookingName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OldBookName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PaymentIndividualRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Payment__c</objectType>
    </variables>
    <variables>
        <name>ReceiptNumber</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
