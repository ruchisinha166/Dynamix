<apex:page standardController="Project__c"  extensions="OpportunityFormController" docType="html-5.0" showHeader="false" applyBodyTag="false" applyHtmlTag="false"  standardStylesheets="false">
    <html>
        <head>   
            <style type="text/css">
                .fontFamily{
                font-family:Calibri;
                font-size:14px;
                }
                .required:after {
                content:" *";
                color: red;
                }
                * {
                box-sizing: border-box;
                }
                .radiobtn {
                display: flex;
                flex-wrap: wrap;
                
                }
                .radioinput input[type="radio"]{float:left; }
                .radioinput label{display:block; padding-right:40px; margin:20px;}
                /* .table .row li {
                background: orange;
                width: 33%;
                text-align: center;
                line-height: 100px;
                border: 5px solid white;
                }
                
                .table + .table li {
                background: olive;
                }
                */
                .radioOpt
                {
                border: none;
                }
            </style> 
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCnrYf9W28u7JCmhKHAL5DyOhBHJGXUvU&libraries=places"></script>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.5.0.js"></script> 


            <script type="text/javascript">
             
                var street = '';
            var postalCode = '';
            var country = '';
            var city = '';
            var state = '';
            var locality = '';
            var address = '';
           
                  function initAutocomplete() {
                var input = document.getElementById('autocomplete');
                      console.log("input ", input);
                var autocomplete = new google.maps.places.Autocomplete(input);
                autocomplete.addListener('place_changed', function() {
                    var place = autocomplete.getPlace();
                    if (!place.geometry) {
                        console.error("Place details not found for the input: ", input.value);
                        return;
                    }
                    address = place.formatted_address;
                    console.log("Selected address: ", address);
                    var formattedAddress = '';

                   
                    place.address_components.forEach(function(component) {
                        if (component.types.includes('street_number')) {
                            street = component.long_name;
                             console.log('street',street);
                        } else if (component.types.includes('route')) {
                            street = (street ? street + ' ' : '') + component.long_name;
                             console.log('street',street);
                        }
                         else if (component.types.includes('postal_code')) {
                            postalCode = component.long_name;
                            console.log('postalCode',postalCode);
                            //document.getElementById('{!$Component.postalCodeInput}').value = postalCode;
                        } else if (component.types.includes('country')) {
                           
                            country = component.long_name;
                            console.log('country'+country);
                            //document.getElementById('{!$Component.country}').value = country;
                        }
                         else if (component.types.includes('locality')) {
                            city = component.long_name;
                             console.log('city'+city);
                        } else if (component.types.includes('administrative_area_level_1')) {
                            state = component.long_name;
                            console.log('state'+state);
                        } 
                        else if (component.types.includes('sublocality')) {
                            locality = component.long_name;
                            console.log('locality1'+locality);
                        }
                        else if (component.types.includes('neighborhood')) {
                            locality = component.long_name;
                            console.log('locality2'+locality);
                        }
                    });
                    var addressDetails = "Street: " + street + "<br/>Postal Code: " + postalCode + "<br/>Country: " + country;
                    // document.getElementById('Country').innerText = country;
                    //  document.getElementById('postalCode').innerText = postalCode;
                    // document.getElementById('selectedAddress').innerText = address;
                    //  document.getElementById('postalCodeInput').innerText = postalCode;
                    jQuery(document).ready(function(){
                        console.log('postalCode--'+postalCode);
                        jQuery('#postalCodeInput').val(postalCode);
                        jQuery('#country').val(country);
                        jQuery('#state').val(state);
                        jQuery('#city').val(city);
                        jQuery('#locality').val(locality);
                        /*  passState(state);
                        passCountry(country);
                        passCity(city);*/
                        Submitlocation(state,country,postalCode,city,street,locality,address);

                        
                    });
                });
            }
            </script>
        </head> 
        <body onload="initAutocomplete()" class="fontFamily">
                      
            <apex:form id="frm">
                <div width = "100%" class="header"  style="margin-top: 10px;margin-left: 10px;margin-bottom: 20px;">
                    <!-- <apex:outputText rendered="{!showHeader}" >-->
                    <center>
                        <apex:image url="{!ProjectHeader}"  rendered="{!showHeader}"  width="70%" height="140" />
                    </center>
                    <!-- </apex:outputText>-->
                </div>
                <apex:pageBlock >
                    
                    
                    <div style="background-color:#005F9E;padding-top:5px;font-size:18px;padding-bottom:5px;color:white;text-align:Center">
                        <b>CUSTOMER INFORMATION FORM</b> 
                    </div>
                    <!--  Section 1 -->
                    <apex:pageBlock >
                        <div style="background-color:#D5D8DC;padding-top:5px;padding-bottom:5px;color:black;text-align:left">
                            <b>PERSONAL INFORMATION</b> 
                        </div>
                        <div>
                            <table style ="width:100%" >
                                <tr>
                                    <th style="width:10%; text-align:left;"  class="required"  >
                                        First Name:
                                    </th>
                                    <td style="display:inline-block;">
                                        <div style="width:20%;display:inline-block; float:left "> 
                                            <apex:input type="text" value="{!primaryAccountFirstName}" disabled="{!makeItdefaultReadOnly}" title="First Name" html-placeholder="First Name" />
                                        </div>
                                    </td>
                                    <th style="width:10%; text-align:left;"  class=""  >
                                        Middle Name:
                                    </th>
                                    <td style="display:inline-block;">
                                        <div style="width:20%;display:inline-block; float:left "> 
                                            <apex:input type="text" value="{!primaryAccountMiddleName}" disabled="{!makeItdefaultReadOnly}" title="Middle Name" html-placeholder="Middle Name" />
                                        </div>
                                    </td>
                                    <th style="width:10%; text-align:left;"  class="required" >
                                        Last Name:
                                    </th>
                                    <td style="display:inline-block; float:left;">
                                        <div style="width:20%;display:inline-block; float:left"> 
                                            <apex:input type="text" value="{!primaryAccountLastName}" disabled="{!makeItdefaultReadOnly}"  title="Last Name" html-placeholder="Last Name"/>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;"  class="required">
                                        Mobile Number
                                    </th>
                                    <th style="width:30%">
                                        <div style="display:inline-block; float:left; "> 
                                            <div style="display:inline-block;"> 
                                                <apex:selectList size="1" disabled="{!makeItdefaultReadOnly}" value="{!selectedPrimaryAccCountryCodeAdd}"> 
                                                    <apex:selectOptions value="{!selectedPrimaryAccCountryCodeAddOption}"/>  
                                                </apex:selectList>
                                            </div>
                                            <div style="display:inline-block;"> 
                                                <apex:input type="text" disabled="{!makeItdefaultReadOnly}" value="{!primaryAccountMobileNo}" html-oninput="checkPrimaryAccountMobileNoStr();" id="primaryAccountMobileNo"  />
                                                <apex:actionSupport event="onchange" reRender="err1" status="status"/>
                                            </div>
                                            <div style="display:inline-block;color:red;" id="err1"></div>
                                        </div>
                                    </th>
                                    <th style="width:10%; text-align:left;">
                                        Email:
                                    </th>
                                    <th style="width:30%;">
                                        <div style="display:inline-block; float:left"> 
                                            <apex:input type="email" value="{!primaryAccountEmail}" html-oninput="checkPrimaryAccountEmailStr();" id="primaryAccountEmail"/>
                                            <apex:actionSupport event="onchange" reRender="err3" status="status"/>
                                        </div>
                                        <div style="display:inline-block;color:red;" id="err3"></div>
                                    </th>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" >
                                        Other Mobile Number
                                    </th>
                                    <th style="width:30%">
                                        <div style="display:inline-block; float:left; "> 
                                            <div style="display:inline-block;"> 
                                                <apex:selectList size="1" value="{!selectedSecondaryAccCountryCodeAdd}"> 
                                                    <apex:selectOptions value="{!selectedPrimaryAccCountryCodeAddOption}"/>  
                                                </apex:selectList>
                                            </div>
                                            <div style="display:inline-block;"> 
                                                <apex:input type="text"  value="{!SecondaryMobileNo}"/>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </table>
                            <table style ="width:100%" >
                                <tr>
                                    <th style="width:10%; text-align:left;" >
                                        Nationality:
                                    </th>
                                    <td>
                                        <apex:selectRadio id="Frequency" value="{!selectedPrimaryAccNationality}" onChange="show(this.value)"  style="border:none;" >
                                            <apex:selectOption itemValue="Indian" itemLabel="Indian"></apex:selectOption> 
                                            <apex:selectOption itemValue="Non-Resident Indian" itemLabel="Non-Resident Indian" ></apex:selectOption>
                                            <apex:selectOption itemValue="Foreign National of Indian Origin" itemLabel="Foreign National of Indian Origin" ></apex:selectOption>
                                            <apex:actionSupport event="onchange" action="{!onChangePrimaryAccNationality}" />
                                        </apex:selectRadio>
                                    </td></tr>
                                <tr>
                                    <th class="required" style="width:10%; text-align:left;">
                                        Age (In Years):
                                    </th>
                                    <td>
                                        <apex:selectRadio id="age" value="{!selectedPrimaryAccAgeAdd}" onChange="show(this.value)"  style="border:none;" >
                                            
                                            <apex:selectoptions value="{!selectedPrimaryAccAgeAddOption}"></apex:selectoptions>
                                            <apex:actionSupport event="onchange" action="{!onChangePrimaryAccNationality}" />
                                            
                                        </apex:selectRadio>
                                    </td></tr>
                                <tr>
                                    <th style="width:10%; text-align:left;">
                                        Marital Status:
                                    </th>
                                    <td>
                                        <apex:selectRadio id="martialStatus" value="{!selectedPrimaryAccMaitalStatusAdd}" onChange="show(this.value)"  style="border:none;" >
                                            <apex:selectoptions value="{!selectedPrimaryAccMaitalStatusAddOption}"></apex:selectoptions>
                                            <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                        </apex:selectRadio>
                                        
                                    </td></tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" >
                                        Ethnicity:
                                    </th>
                                    <td style="display:inline-block;">
                                        <div style="width:20%; display:inline-block; margin-left:24px;float:left; "> 
                                            <apex:selectList size="1"  value="{!ethnicity}"> 
                                                <apex:selectOptions value="{!selectedEthnicityAddOption}"/>  
                                            </apex:selectList>      
                                        </div>
                                    </td>
                                    
                                </tr>
                                
                            </table>
                            
                            <table style ="width:100%" >
                               
                                    
                                
                                <tr>
                                    <th style="width:11.8%; text-align:left;"  class="required">
                                        Residental Address:
                                    </th>
                                    <td style="width:90%;">
                                        <input id="autocomplete"  style="display:inline-block;width:100%;" placeholder="Enter your address" type="text"/>
                                        <!--div id="selectedAddress"></div--> 
                                    </td>
                                </tr>
                            </table>
                             <div Id ="locationnn">
                            <table style ="width:100%" >
                                
                                <tr>
                                    <th style="width:12%; text-align:left;">Apartment/Flat:
                                    </th>
                                    <td style="width:28%">
                                        <div style="display:inline-block;width:10%;"> 
                                            <apex:input type="text" value="{!apartmentFlat}" html-placeholder="Apartment/Flat"/>
                                        </div>
                                    </td>
                                    <th style="width:10%; text-align:left;" >Locality:
                                    </th>
                                    <td style="width:27%">
                                        <div style="display:inline-block;width:10%;"> 
                                            <!--apex:selectList size="1"  value="{!locality}"> 
                                                <apex:selectOptions value="{!selectedLocalityAddOption}"/>  
                                            </apex:selectList-->
                                            <input id="locality" class="locality" type="text" value="{!locality}" html-placeholder= "Locality" />

                                        </div>
                                        
                                    </td>
                                    <th style="width:10%; text-align:left;" class="required">Residence City:
                                    </th>
                                    <td>
                                        <div style="display:inline-block; width:10%;"> 
                                            <input id="city" class="city" type="text" value="{!primaryAccMailingAddCity}" html-placeholder= "City" />
                                         
                                        </div></td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" class="required">PIN Code:
                                    </th>
                                    <td>
                                        <div style="display:inline-block; float:left; "> 
                                            <div style="display:inline-block;">
                                                <input id="postalCodeInput" class="postalCodeInput" type="text" value="{!primaryAccMailingAddPostalCode}" html-oninput="checkPrimaryAccountPostCodeStr();"  html-placeholder="PostalCode"/>
                                              
                                                <apex:actionSupport event="onchange" reRender="priAccPostCodeErr" status="status"/>
                                             
                                            </div>
                                            <div style="display:inline-block;color:red;" id="priAccPostCodeErr"></div>
                                        </div>
                                      
                                        
                                    </td>
                                    <th style="width:10%; text-align:left;">State:
                                    </th>
                                    <td>
                                        <div style="display:inline-block;width:10%;" id ="stateDiv"> 
                                            <input id="state" class="state" type="text" value="{!primaryAccMailingAddState}"  html-placeholder="State"/>
                                           
                                            
                                            
                                            <!--apex:actionFunction action="{!saveUnitSnagList}" name="saveUnitSnagList" rerender="frm">
                                                <apex:param value="" name="SnagDetails"/>
                                            </apex:actionFunction-->
                                        </div>
                                        
                                    </td>
                                    <th style="width:10%; text-align:left;" >Country:
                                    </th>
                                    <td>
                                        <div style="display:inline-block;width:10%;" id="countryDiv"> 
                                            <input id="country" class="country" type="text" value="{!primaryAccMailingAddCountry}" html-placeholder="Country"/>
                                          
                                        </div>
                                        
                                    </td>
                                </tr>
                            </table>
                            </div>
                            
                               <div style="background-color:#D5D8DC;padding-top:5px;padding-bottom:5px;color:black;text-align:left">
                                <b>CUSTOMER EMPLOYMENT DETAILS</b>
                            </div>
                            <div>
                                <table style ="width:100%" >
                                    
                                    <tr>
                                        <th style="width:10%; text-align:left;">
                                            Employment Type:
                                        </th>
                                        <td>
                                            <div style="width:90%;display:inline-block; float:left"> 
                                                <apex:selectRadio id="emplotmentType" value="{!selectedEmploymentType}" onChange="show(this.value)"  style="border:none;" >
                                                    <apex:selectoptions value="{!selectedEmploymentTypeAddOption}"></apex:selectoptions>
                                                    <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                                </apex:selectRadio>
                                            </div>
                                            
                                        </td></tr> 
                                </table>
                                <table style ="width:100%" >
                                    <tr>
                                        <th style="width:13%; text-align:left;">
                                            Company Name:
                                        </th>
                                        <th style="width:30%">
                                            <div style="width:20%;display:inline-block; float:left"> 
                                                <apex:input type="text" value="{!companyName}" html-placeholder="Company Name" />
                                            </div>
                                        </th>
                                        <th style="width:10%; text-align:left;">
                                            Designation:
                                        </th>
                                        <th style="width:30%;">
                                            <div style="width:20%;display:inline-block; float:left"> 
                                                <apex:input type="text" value="{!designation}" html-placeholder="Designation"/>
                                            </div>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th style="width:10%; text-align:left;">
                                            Office Location:
                                        </th>
                                        <th style="width:10%;">
                                            <div style="width:20%;display:inline-block; float:left"> 
                                                <apex:input type="text" value="{!officeLocation}" html-placeholder="Office Location"/>
                                            </div>
                                        </th>
                                        <th style="width:10%; text-align:left;">
                                            Pin Code:
                                        </th>
                                        <th style="width:10%;">
                                            <div style="width:20%;display:inline-block; float:left"> 
                                                <apex:input type="text" value="{!officePinCode}" html-placeholder="Office Pin Code" html-oninput="checkPrimaryAccountMobileNoStr();"/>
                                            </div>
                                        </th>
                                        <th style="width:10%; text-align:left;">
                                            Industry:
                                        </th>
                                        <th style="width:10%">
                                            <div style="width:20%;display:inline-block; float:left"> 
                                                <apex:input type="text" value="{!Industry}" html-placeholder="Industry" />
                                            </div>
                                        </th>
                                        
                                    </tr>
                                    
                                </table>
                            </div>
                            
                            <!------- Requirement Details---->
                            <div style="background-color:#D5D8DC;padding-top:5px;padding-bottom:5px;color:black;text-align:left" class="required">
                                <b>REQUIREMENTS DETAILS</b>
                            </div>
                            <table style ="width:100%" >
                                <tr>
                                    <th style="width:10%; text-align:left;" class="required">
                                        Desired Budget:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="budget" value="{!selectedBudgetPicklistValue}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!budgetPicklistOptions}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:11%; text-align:left;" class="required">
                                        Desired Configuration:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="configuration" value="{!selectedProjectConfigurationAdd}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!projectConfigurationPicklistOptions}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;">
                                        Construction Status:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="constructionStatus" value="{!selectedconstructionStatusAdd}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!selectedConstructionStatusAddOption}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" >
                                        Nature of Use:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="natureOfSource" value="{!selectedNatureInUseAdd}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!selectedNatureOfSourceAddOption}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" >
                                        Source Of Funding:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="SourceOfFunding" value="{!selectedSourceOfFundingStatus}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!selectedSourceOfFundingAddOption}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="width:10%; text-align:left;" class="required">
                                        Carpet Area:
                                    </th>
                                    <td style="width:90%">
                                        <div style="width:90%;display:inline-block; float:left"> 
                                            <apex:selectRadio id="projectCarpetArea" value="{!projectCarpetArea}" onChange="show(this.value)"  style="border:none;" >
                                                <apex:selectoptions value="{!selectedCarpetAreaAddOption}"></apex:selectoptions>
                                                <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                            </apex:selectRadio>
                                        </div>
                                    </td>
                                </tr>
                                
                            </table>
                            
                            <div style="background-color:#D5D8DC;padding-top:5px;padding-bottom:5px;color:black;text-align:left" class="required">
                                <b>SOURCE OF VISIT</b> 
                            </div>
                            <apex:actionFunction name="updateHidden" action="{!updateSelectedValue}" rerender="walkInSourceSection">
                                <apex:param name="selectedValue" assignTo="{!selectedValue}" value="" />
                            </apex:actionFunction>
                            <!--apex:inputHidden value="{!selectedValue}" id="selectedValue"  /-->
                            <apex:pageBlock >
                                
                                <table>
                                    <apex:repeat value="{!items}" var="row">
                                        <tr>
                                            <apex:repeat value="{!row}" var="item">
                                                <td>
                                                    <apex:pageBlock rendered="{! If(makeItReadOnly == true ,true,false) }">
                                                        
                                                        <input name="isRadio" type="radio" id="radio{!item.name}"
                                                               onchange="updateHidden(this.value)"
                                                               value="{!item.name}"  disabled="{!makeItReadOnly}"  />
                                                        <label for="radio{!item.name}">{!item.name}</label>
                                                    </apex:pageBlock>
                                                    <apex:pageBlock rendered="{! If(makeItReadOnly == false ,true,false) }">
                                                        
                                                        <input name="isRadio" type="radio" id="radio{!item.name}"
                                                               onchange="updateHidden(this.value)" rendered="{registeredCPSection}"
                                                               value="{!item.name}"/>
                                                        <label for="radio{!item.name}">{!item.name}</label>
                                                    </apex:pageBlock>
                                                </td>
                                            </apex:repeat>
                                        </tr>
                                    </apex:repeat>
                                    
                                </table>
                                
                                
                                
                                <apex:outputPanel id="walkInSourceSection">
                                    <apex:pageBlock rendered="{! If(showReferralByCustomer == true ,true,false) }">
                                        <div style="width:100%;height:50px;" id="referralByCustomer"/>
                                        <script type="text/javascript">
                                        document.addEventListener("getreferralByCustomerIdData", function(event){
                                            var recordId= event.detail.referralByCustomerId;
                                            document.getElementById('{!$Component.referralByCustomerId}').value = event.detail.referralByCustomerId;
                                            console.log('$$$$$$$$'+document.getElementById('{!$Component.referralByCustomerId}').value);
                                            
                                            console.log('vf event data window listener => ', event.detail.referralByCustomerId);
                                            
                                        });
                                        console.log('makeItReadOnly'+makeItReadOnly);
                                        var makeItReadOnlyBoolean;
                                        if(makeItReadOnly == true)
                                        { makeItReadOnlyBoolean = 'Yes';
                                        }
                                        else
                                        {
                                            makeItReadOnlyBoolean = 'No';
                                        }
                                        
                                        $Lightning.use("c:LookUpApp", function() {
                                            $Lightning.createComponent("c:callReferralByCustomer", 
                                                                       {
                                                                           "referralId" : referralId,
                                                                           "referralName":referralName,
                                                                           "setReadOnlyChannelPartner":setReadOnlyChannelPartner
                                                                       }, //Pass Parameter
                                                                       "referralByCustomer", function(component) {
                                                                           console.log('Component created Successfully');
                                                                       });
                                        });
                                        </script>
                                    </apex:pageBlock>
                                    <!---- Referal By customer-->
                                    <apex:pageBlock rendered="{! If(showReferralByOther == true ,true,false) }">
                                        
                                        <table style="table-layout:fixed;margin-top:10px; ">
                                            <tr>
                                                <th style="text-align:left;width:13%;"  class="required">
                                                    Referral First Name:
                                                </th>
                                                <td style="display:inline-block;">
                                                    <div style="display:inline-block; float:left "> 
                                                        <apex:input type="text" value="{!referralFirstName}" title="Referral First Name" html-placeholder="Referral First Name" />
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="text-align:left;width:13%; " class="required">
                                                    Referral Last Name
                                                </th>
                                                <th >
                                                    <div style="display:inline-block; float:left"> 
                                                        <apex:input type="text" value="{!referralLastName}" html-placeholder="Referral Last Name" />
                                                    </div>
                                                </th>
                                                
                                            </tr>
                                            <tr>
                                                <th style="text-align:left;width:13%; "  class="required">
                                                    Referral Mobile Number:
                                                </th>
                                                
                                                <th>
                                                    <div style="display:inline-block; float:left; "> 
                                                        <div style="display:inline-block;"> 
                                                            <apex:selectList size="1" value="{!countryCodeValue}"> 
                                                                <apex:selectOptions value="{!selectedPrimaryAccCountryCodeAddOption}"/>  
                                                            </apex:selectList>
                                                        </div>
                                                        <!--div style="display:inline-block;"> 
<apex:input type="text" value="{!referralByMobileNumber}"  id="referralByMobileNumber"/>
</div-->
                                                        <div style="display:inline-block;"> 
                                                            <apex:input type="text"  value="{!referralByMobileNumber}" html-oninput="checkreferralMobileNumberStr();" id="referralByMobileNumber"/>
                                                            <apex:actionSupport event="onchange" reRender="err2" status="status"/>
                                                        </div>
                                                        <div style="display:inline-block;color:red;" id="err2"></div>
                                                        
                                                    </div>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="width:10%; text-align:left;" class="required">
                                                    Referral Type:
                                                </th>
                                                <td style="width:90%">
                                                    <div style="width:90%;display:inline-block; float:left"> 
                                                        <apex:selectRadio id="referralType" value="{!referralType}" onChange="show(this.value)"  style="border:none;" >
                                                            <apex:selectoptions value="{!selectedReferralTypeAddOption}"></apex:selectoptions>
                                                            <apex:actionSupport event="onchange" action="{!onChangeMaritalStatus}" />
                                                        </apex:selectRadio>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </apex:pageBlock>
                                    
                                    <!----- Channel Partner--->
                                    <apex:pageBlock rendered="{! If((selectedValue !='Channel Partner') && (showChannelPartner == true)  ,true,false) }">
                                        <div>
                                            <apex:includeLightning />
                                            <div style="width:100%;height:50px;" id="HideLightningSalesManagerContainer"/>
                                            <div style="width:100%;height:50px;" id="HideLightningReferralByCustomerContainer"/>
                                        </div>
                                    </apex:pageBlock>
                                    <apex:outputPanel id="registeredCPSection">
                                        <apex:pageBlock rendered="{! If(((selectedValue =='Channel Partner') || (showChannelPartner == true)),true,false) }">
                                            <div>
                                                <apex:includeLightning />
                                                <div style="width:100%;height:50px;" id="LightningsourcingManagerContainer"/>
                                                
                                                <script type="text/javascript">
                                                //get contact Id from URL
                                                
                                                document.addEventListener("getSourcingManagerdata", function(event){
                                                    var recordId= event.detail.salesMaangerId;
                                                    document.getElementById('{!$Component.sourcingManagerId}').value = event.detail.sourcingManagerId;
                                                    console.log('$$$$$$$$'+document.getElementById('{!$Component.sourcingManagerId}').value);
                                                    
                                                    console.log('vf event data window listener => ', event.detail.sourcingManagerId);
                                                    
                                                });
                                                
                                                var channelPartnerId = document.querySelector("[id$='channelPartnerId']").value;
                                                console.log('channelPartnerId'+channelPartnerId);
                                                var channelPartnerName = document.querySelector("[id$='channelPartnerName']").value;
                                                console.log('channelPartnerName'+channelPartnerName);
                                                var sourcingManagerId = document.querySelector("[id$='sourcingManagerId']").value;
                                                console.log('sourcingManagerId'+sourcingManagerId);
                                                var sourcingManagerName = document.querySelector("[id$='sourcingManagerName']").value;
                                                console.log('sourcingManagerName'+sourcingManagerName);
                                                var setReadOnlyChannelPartner = document.querySelector("[id$='setReadOnlyChannelPartner']").value;
                                                console.log('setReadOnlyChannelPartner'+setReadOnlyChannelPartner);
                                                //Create Lightning Component
                                                $Lightning.use("c:LookUpApp", function() {
                                                    $Lightning.createComponent("c:sourcingManager", 
                                                                               {
                                                                                   "sourcingManagerId" : sourcingManagerId,
                                                                                   "sourcingManagerName":sourcingManagerName,
                                                                                   "setReadOnlyChannelPartner":setReadOnlyChannelPartner
                                                                                   
                                                                                   
                                                                               }, //Pass Parameter
                                                                               "LightningsourcingManagerContainer", function(component) {
                                                                                   console.log('Component created Successfully 1');
                                                                               });
                                                });
                                                </script>
                                            </div>
                                        </apex:pageBlock>
                                        
                                        <apex:pageBlock rendered="{! If(((selectedValue =='Channel Partner') || (showChannelPartner == true)) && (newchannelPartner == false) ,true,false) }">
                                            
                                            <div>
                                                <apex:includeLightning />
                                                <div style="width:100%;height:50px;" id="LightningSalesManagerContainer"/>
                                                
                                                <script type="text/javascript">
                                                //get contact Id from URL
                                                
                                                /* document.addEventListener("getSourcingManagerdata", function(event){
                                                var recordId= event.detail.salesMaangerId;
                                                document.getElementById('{!$Component.sourcingManagerId}').value = event.detail.sourcingManagerId;
                                                console.log('$$$$$$$$'+document.getElementById('{!$Component.sourcingManagerId}').value);
                                                
                                                console.log('vf event data window listener => ', event.detail.sourcingManagerId);
                                                
                                            });*/
                                                document.addEventListener("getdata", function(event){
                                                    var recordId= event.detail.parentAccountSelectedRecord;
                                                    document.getElementById('{!$Component.channelPartnerId}').value = event.detail.parentAccountSelectedRecord;
                                                    console.log('$$$$$$$$'+document.getElementById('{!$Component.channelPartnerId}').value);
                                                    
                                                    console.log('vf event data window listener => ', event.detail.parentAccountSelectedRecord);
                                                    
                                                });
                                                var channelPartnerId = document.querySelector("[id$='channelPartnerId']").value;
                                                console.log('channelPartnerId'+channelPartnerId);
                                                var channelPartnerName = document.querySelector("[id$='channelPartnerName']").value;
                                                console.log('channelPartnerName'+channelPartnerName);
                                                var sourcingManagerId = document.querySelector("[id$='sourcingManagerId']").value;
                                                console.log('sourcingManagerId'+sourcingManagerId);
                                                var sourcingManagerName = document.querySelector("[id$='sourcingManagerName']").value;
                                                console.log('sourcingManagerName'+sourcingManagerName);
                                                var setReadOnlyChannelPartner = document.querySelector("[id$='setReadOnlyChannelPartner']").value;
                                                console.log('setReadOnlyChannelPartner'+setReadOnlyChannelPartner);
                                                //Create Lightning Component
                                                $Lightning.use("c:LookUpApp", function() {
                                                    $Lightning.createComponent("c:callOwnerLookUp", 
                                                                               {
                                                                                   "recordInfo" : channelPartnerId,
                                                                                   "channelPartnerName":channelPartnerName,
                                                                                   "sourcingManagerId" : sourcingManagerId,
                                                                                   "sourcingManagerName":sourcingManagerName,
                                                                                   "setReadOnlyChannelPartner":setReadOnlyChannelPartner
                                                                                   
                                                                                   
                                                                               }, //Pass Parameter
                                                                               "LightningSalesManagerContainer", function(component) {
                                                                                   console.log('Component created Successfully');
                                                                               });
                                                });
                                                </script>
                                            </div>
                                            <!----->
                                            
                                            <!--Lightning Container-->
                                            
                                            
                                            <div style="width:100%;">
                                            </div>
                                            
                                        </apex:pageBlock>
                                    </apex:outputPanel>
                                    <apex:pageBlock rendered="{! If((selectedValue =='Channel Partner') || (showChannelPartner == true) ,true,false) }">
                                        <div>
                                            <apex:pageBlockSection >
                                                <apex:inputCheckbox value="{!UnregisteredCP}" label="Unregistered CP" disabled="{!makeItReadOnly}">
                                                    <apex:actionSupport event="onchange" action="{!onChangeUnregisteredCP}" rerender="UnregisteredCPSection,registeredCPSection"/>
                                                </apex:inputCheckbox>
                                            </apex:pageBlockSection>
                                            <div style="width:100%;">
                                                <apex:outputPanel id="UnregisteredCPSection">
                                                    <apex:pageBlock rendered="{!newchannelPartner}">
                                                        <table style="table-layout:fixed; ">
                                                            <tr>
                                                                <th style="text-align:left;"  class="required">
                                                                    CP Firm Name:
                                                                </th>
                                                                <td style="display:inline-block;">
                                                                    <div style="display:inline-block; float:left "> 
                                                                        <apex:input type="text" value="{!cpFirmName}" title="CP Firm Name" html-placeholder="CP Firm Name" />
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <th style="text-align:left;">
                                                                    CP Name:
                                                                </th>
                                                                <th >
                                                                    <div style="display:inline-block; float:left"> 
                                                                        <apex:input type="text" value="{!CPName}" html-placeholder="CP Name" />
                                                                    </div>
                                                                </th>
                                                                
                                                            </tr>
                                                            <tr>
                                                                <th style="text-align:left;"  class="required">
                                                                    CP Mobile Number:
                                                                </th>
                                                                
                                                                <th>
                                                                    <div style="display:inline-block; float:left; "> 
                                                                        <div style="display:inline-block;"> 
                                                                            <apex:selectList size="1" value="{!countryCodeValue}"> 
                                                                                <apex:selectOptions value="{!selectedPrimaryAccCountryCodeAddOption}"/>  
                                                                            </apex:selectList>
                                                                        </div>
                                                                        <div style="display:inline-block;"> 
                                                                            <apex:input type="text" value="{!channelPartnerNumber}"  id="channelPartnerNumber"/>
                                                                        </div>
                                                                    </div>
                                                                </th>
                                                            </tr>
                                                            <tr>
                                                                <th style="text-align:left;">
                                                                    Rera Number:
                                                                </th>
                                                                <th>
                                                                    <div style="display:inline-block; float:left"> 
                                                                        <apex:input type="text" value="{!reraNumber}" id="reraNumber"/>
                                                                        <apex:actionSupport event="onchange" reRender="err3" status="status"/>
                                                                    </div>
                                                                    <div style="display:inline-block;color:red;" id="err3"></div>
                                                                </th>
                                                            </tr>
                                                        </table> 
                                                    </apex:pageBlock>
                                                </apex:outputPanel>
                                            </div>
                                            
                                            
                                            
                                            
                                            <!-- </apex:pageBlock>--->
                                        </div>
                                    </apex:pageBlock>
                                    <!--/apex:repeat-->
                                </apex:outputPanel> 
                            </apex:pageBlock>
                            
                        </div>
                    </apex:pageBlock>
                    <div>
                        
                        
                        <apex:includeLightning />
                        <div style="width:100%;height:50px;" id="LightningManagerContainer"/>
                        <apex:inputhidden id="salesManagerId" value="{!salesManagerId}" />
                        <apex:inputhidden id="salesManagerName" value="{!salesManagerName}" />
                        <apex:inputhidden id="secondarySalesManagerId" value="{!secondarySalesManagerId}" />
                        <apex:inputhidden id="secondarySalesManagerName" value="{!secondarySalesManagerName}" />
                        <apex:inputhidden id="secondarySalesManager" value="{!secondarySalesManager}" />
                        <apex:inputhidden id="makeItReadOnly" value="{!makeItReadOnly}" />
                        
                        <apex:inputhidden id="sourcingManagerId" value="{!sourcingManagerId}" />
                        <apex:inputhidden id="sourcingManagerName" value="{!sourcingManagerName}" />
                        <apex:inputhidden id="channelPartnerId" value="{!channelStringPartnerRecordID}" />
                        <apex:inputhidden id="channelPartnerName" value="{!channelPartnerName}" />
                        <apex:inputhidden id="setReadOnlyChannelPartner" value="{!setReadOnlyChannelPartner}" />
                        <apex:inputhidden id="referralId" value="{!referralId}" />
                        <apex:inputhidden id="referralName" value="{!referralName}" />
                        <apex:inputhidden id="referralByCustomerId" value="{!referralByCustomerId}" />
                        <script type="text/javascript">
                        //get contact Id from URL
                        
                        document.addEventListener("getSalesManagerdata", function(event){
                            var recordId= event.detail.salesMaangerId;
                            document.getElementById('{!$Component.salesManagerId}').value = event.detail.salesMaangerId;
                            console.log('$$$$$$$$'+document.getElementById('{!$Component.salesManagerId}').value);
                            
                            console.log('vf event data window listener => ', event.detail.salesMaangerId);
                            
                        });
                        document.addEventListener("getSecondarySalesManagerdata", function(event){
                            var recordId= event.detail.secondarySalesManagerId;
                            document.getElementById('{!$Component.secondarySalesManagerId}').value = event.detail.secondarySalesManagerId;
                            console.log('$$$$$$$$'+document.getElementById('{!$Component.salesManagerId}').value);
                            
                            console.log('vf event data window listener => ', event.detail.secondarySalesManagerId);
                            
                        });
                        
                        
                        var salesManagerId = document.querySelector("[id$='salesManagerId']").value;
                        console.log('salesManagerId'+salesManagerId);
                        var salesManagerName = document.querySelector("[id$='salesManagerName']").value;
                        console.log('salesManagerName'+salesManagerName);
                        var secondarySalesManagerId = document.querySelector("[id$='secondarySalesManagerId']").value;
                        console.log('salesManagerId'+salesManagerId);
                        var secondarySalesManagerName = document.querySelector("[id$='secondarySalesManagerName']").value;
                        console.log('salesManagerName'+salesManagerName);
                        var makeItReadOnly = document.querySelector("[id$='makeItReadOnly']").value;
                        console.log('makeItReadOnly'+makeItReadOnly);
                        var secondarySalesManager = document.querySelector("[id$='secondarySalesManager']").value;
                        console.log('secondarySalesManager'+secondarySalesManager);
                        //Create Lightning Component
                        $Lightning.use("c:LookUpApp", function() {
                            $Lightning.createComponent("c:callReusableLookUp", 
                                                       {
                                                           "recordInfo" : salesManagerId,
                                                           "salesManagerName":salesManagerName,
                                                           "makeItReadOnly":"true",
                                                           "secondarySalesManagerId" : secondarySalesManagerId,
                                                           "secondarySalesManagerName":secondarySalesManagerName,
                                                           "secondarySalesManager":secondarySalesManager
                                                           
                                                       }, //Pass Parameter
                                                       "LightningManagerContainer", function(component) {
                                                           console.log('Component created Successfully');
                                                       });
                        });
                        
                        
                        document.addEventListener("getSourcingManagerdata", function(event){
                            var recordId= event.detail.salesMaangerId;
                            document.getElementById('{!$Component.sourcingManagerId}').value = event.detail.sourcingManagerId;
                            console.log('$$$$$$$$'+document.getElementById('{!$Component.sourcingManagerId}').value);
                            
                            console.log('vf event data window listener => ', event.detail.sourcingManagerId);
                            
                        });
                        document.addEventListener("getdata", function(event){
                            var recordId= event.detail.parentAccountSelectedRecord;
                            document.getElementById('{!$Component.channelPartnerId}').value = event.detail.parentAccountSelectedRecord;
                            console.log('$$$$$$$$'+document.getElementById('{!$Component.channelPartnerId}').value);
                            
                            console.log('vf event data window listener => ', event.detail.parentAccountSelectedRecord);
                            
                        });
                        var channelPartnerId = document.querySelector("[id$='channelPartnerId']").value;
                        console.log('channelPartnerId'+channelPartnerId);
                        var channelPartnerName = document.querySelector("[id$='channelPartnerName']").value;
                        console.log('channelPartnerName'+channelPartnerName);
                        var sourcingManagerId = document.querySelector("[id$='sourcingManagerId']").value;
                        console.log('sourcingManagerId'+sourcingManagerId);
                        var sourcingManagerName = document.querySelector("[id$='sourcingManagerName']").value;
                        console.log('sourcingManagerName'+sourcingManagerName);
                        var setReadOnlyChannelPartner = document.querySelector("[id$='setReadOnlyChannelPartner']").value;
                        console.log('setReadOnlyChannelPartner'+setReadOnlyChannelPartner);
                        var referralId = document.querySelector("[id$='referralId']").value;
                        console.log('referralId'+referralId);
                        var referralName = document.querySelector("[id$='referralName']").value;
                        console.log('referralName'+referralName);
                        var makeItReadOnly = document.querySelector("[id$='makeItReadOnly']").value;
                        console.log('makeItReadOnly'+makeItReadOnly);
                        //Create Lightning Component
                        $Lightning.use("c:LookUpApp", function() {
                            $Lightning.createComponent("c:callOwnerLookUp", 
                                                       {
                                                           "recordInfo" : channelPartnerId,
                                                           "channelPartnerName":channelPartnerName,
                                                           "sourcingManagerId" : sourcingManagerId,
                                                           "sourcingManagerName":sourcingManagerName,
                                                           "setReadOnlyChannelPartner":setReadOnlyChannelPartner
                                                           
                                                           
                                                       }, //Pass Parameter
                                                       "HideLightningSalesManagerContainer", function(component) {
                                                           console.log('Component created Successfully');
                                                       });
                        });
                        
                        $Lightning.use("c:LookUpApp", function() {
                            $Lightning.createComponent("c:callReferralByCustomer", 
                                                       {
                                                           "referralId" : referralId,
                                                           "referralName":referralName,
                                                           "setReadOnlyChannelPartner":setReadOnlyChannelPartner
                                                       }, //Pass Parameter
                                                       "HideLightningReferralByCustomerContainer", function(component) {
                                                           console.log('Component created Successfully');
                                                       });
                        });
                        </script>
                    </div>
                    <apex:actionFunction name="Submitlocation" action="{!Submitlocation}" reRender="locationnn">
                        <apex:param name="stateFromPage" assignTo="{!stateFromPage}" value=""/>
                        <apex:param name="countryFromPage" assignTo="{!countryFromPage}" value=""/>
                        <apex:param name="pinCodeFromPage" assignTo="{!pinCodeFromPage}" value=""/>
                        <apex:param name="cityFromPage" assignTo="{!cityFromPage}" value=""/>
                        <apex:param name="streetFromPage" assignTo="{!streetFromPage}" value=""/>
                        <apex:param name="localityFromPage" assignTo="{!localityFromPage}" value=""/>
                         <apex:param name="residenceAddress" assignTo="{!residenceAddress}" value=""/>
                    </apex:actionFunction>
                    <div align="center" style="display: {!IF(submittedBy == 'customer', 'block', 'none')};padding-top:10px;padding-bottom:10px;" draggable="false" >
                        
                        <apex:commandButton id="submitBtn1"  value="Save Form"  action="{!submitBookingForm}" onclick="return bookingForm_Validation();" style="padding-top:8px;border: none;border-radius: 4px;padding-bottom:8px;" >
                            
                        </apex:commandButton>
                    </div>
                    <apex:outputPanel id="msgSection">
                        
                        <div style="border:1px solid black;background:#F5F5D6;">
                            <div style="padding-left:5px;">
                                <apex:pageMessages escape="false" />
                            </div>  
                        </div>
                    </apex:outputPanel>
                    
                </apex:pageBlock>
                
            </apex:form>
          
        </body>  
    <script type="text/javascript">
        
        // Use JavaScript to set the default selection
        window.onload = function () {
            var selectedValue = "{!selectedValue}";
            console.log('selectedValue'+selectedValue);
            var selectedValueRadio = document.getElementById("radio"+ selectedValue);
            if (selectedValueRadio) {
                selectedValueRadio.checked = true;
                updateHidden(selectedValueRadio.value);
            }
                initAutocomplete();

            
        };
        /*function updateHidden(event) {
           document.querySelector("[id$=selectedValue]").value = event.target.value;
           document.getElementById('{!$Component.selectedValue}').value = event.target.value;

         if(event.target.value ='Channel Partner')
             {
                 document.querySelector("[id$='walkInSourceSection']").style.display = 'block';
                 }
         else
             {
                  document.querySelector("[id$='walkInSourceSection']").disabled = true;;
                 }
                 
                     

        console.log(event.target.value);
    }*/
        function checkreferralMobileNumberStr(){
            var phone=document.querySelector("[id$='referralByMobileNumber']").value;
            var letters = /^[A-Za-z]+$/;
            if(phone.length!=10 || isNaN(phone)){
                document.getElementById("err2").innerHTML="Number must be 10 digits long & cannot contain Letters.";
                event.preventDefault();
                return true;
            }else{
                document.getElementById("err2").innerHTML=""; 
            }
        }
        
        function checkPrimaryAccountOrgPhoneStr(){
            var priAccOrgPhone=document.querySelector("[id$='primaryAccountChannelPartnerMobileNumber']").value;
            //var letters = /^[A-Za-z]+$/;
            if(isNaN(priAccOrgPhone)){
                document.getElementById("primaryAccountChannelPartnerMobileNumberError").innerHTML="Channel Partner phone number can contains only number.";
                event.preventDefault();
                return true;
            }else{
                document.getElementById("primaryAccountChannelPartnerMobileNumberError").innerHTML=""; 
            }
        }
        
        
        function sendOtp(){
            document.querySelector("[id$='getOtpBtn']").value = 'Resend OTP';
            document.querySelector("[id$='getOtpBtn']").disabled = true;
            document.querySelector("[id$='verifyBtn']").disabled = false;
            document.querySelector("[id$='verifyBtn']").enable = true;
            //   button.disabled=true;
            //  setTimeout(function(){document.getElementById("[id$='getOtpBtn']").disabled = false;},5000);
            
            document.querySelector("[id$='otpTimer']").style.display = 'block';
            var timerOn = true;
            timer(300,true);
            return true;    
        }
        function timer(remaining,timerOn) {
            var m = Math.floor(remaining / 60);
            var s = remaining % 60;
            
            m = m < 10 ? '0' + m : m;
            s = s < 10 ? '0' + s : s;
            document.getElementById('timer').innerHTML = m + ':' + s;
            remaining -= 1;
            
            if(remaining >= 0 && timerOn) {
                setTimeout(function() {
                    if(remaining==0){
                        timer(remaining,false);
                    }
                    else{
                        timer(remaining,true);
                    }
                }, 1000);
                return;
            }
            
            if(!timerOn) {
                // Do validate stuff here
                document.querySelector("[id$='getOtpBtn']").enable = true;
                document.querySelector("[id$='getOtpBtn']").disabled = false;
                document.querySelector("[id$='verifyBtn']").disabled = true;
                return;
            }
            
        }
        function verifyFun(){
            
        }
        function onloadf(){
            
            /* var vbtn= document.querySelector("[id$='verifyBtn']").disable = true;
             document.querySelector("[id$='submitBtn']").disable = true;
            document.querySelector("[id$='otpTimer']").style.display = 'none';
            var chbValue= document.querySelector("[id$='termsandCondiCheckbox']").checked;
            const button = document.querySelector("[id$='getOtpBtn']");
            var inPutBox = document.querySelector("[id$='OtpInp']");
            if(chbValue==true){
                button.disabled=false;
                button.enable=true;
                inPutBox.disabled = false;
                inPutBox.enable = true;
                vbtn.disabled = false;
                vbtn.enable = true;
            }
            else{
                button.disabled=true;
                button.enable=false;
                inPutBox.disabled=true;
                inPutBox.enable=false;
                vbtn.disabled=true;
                vbtn.enable=false;
            } */           
        }
        function checkPrimaryAccountPostCodeStr(){
            var priAccPostCode=document.querySelector("[id$='primaryAccMailingAddPostalCode']").value;
            if(isNaN(priAccPostCode)){
                document.getElementById("priAccPostCodeErr").innerHTML="Post Code can contains only number.";
                event.preventDefault();
                return true;
            }else{
                document.getElementById("priAccPostCodeErr").innerHTML=""; 
            }      
        }
        
        function checkPrimaryAccountEmailStr(){
            var email=document.querySelector("[id$='primaryAccountEmail']").value;
            var atpos=email.indexOf("@");
            var dotpos=email.lastIndexOf(".");
            if(atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length){
                document.getElementById("err3").innerHTML="Invalid Email.";
                event.preventDefault();
                return true;
            }else{
                document.getElementById("err3").innerHTML=""; 
            }
        }
        
        
        </script>
        
    </html>
</apex:page>